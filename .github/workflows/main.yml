name: CI/CD Workflow

on:
  push:
    branches:
      - main
    tags:
      - release.*

jobs:
  # build-and-test-frontend:
  #   name: Build and Test Frontend
  #   runs-on: ubuntu-latest

  #   steps:
  #   - name: Checkout Repository
  #     uses: actions/checkout@v4

  #   - name: Set up Node.js
  #     uses: actions/setup-node@v3
  #     with:
  #       node-version: '16'

  #   - name: Install Frontend Dependencies
  #     run: npm install
  #     working-directory: ./frontend

  #   - name: Run Frontend Tests
  #     run: npm test
  #     working-directory: ./frontend

  build-and-test-backend:
    name: Build and Test Backend
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Set up Java
      uses: actions/setup-java@v3
      with:
        java-version: '17'
        distribution: 'temurin'

    - name: Build and Test with Gradle
      run: ./gradlew clean build
      working-directory: ./backend

  deploy:
    name: Deploy
    runs-on: ubuntu-latest
    needs: [build-and-test-backend]
    if: github.ref_type == 'tag'

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    # Add deployment steps here
    - name: Deploy to Server
      run: echo "Deployment script runs here"
